!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("ngx-bootstrap/utils"),require("ngx-bootstrap/component-loader"),require("ngx-bootstrap/positioning")):"function"==typeof define&&define.amd?define("ngx-bootstrap/modal",["exports","@angular/core","ngx-bootstrap/utils","ngx-bootstrap/component-loader","ngx-bootstrap/positioning"],e):e(((t=t||self)["ngx-bootstrap"]=t["ngx-bootstrap"]||{},t["ngx-bootstrap"].modal={}),t.ng.core,t.utils,t.componentLoader,t.positioning)}(this,function(t,e,i,n,o){"use strict";var s=function(){function t(){this.hide=Function,this.setClass=Function}return t.decorators=[{type:e.Injectable}],t}(),r=function(t){this.animate=!0,Object.assign(this,t)},a=function(){function t(){}return t.decorators=[{type:e.Injectable}],t}(),d={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",animated:!0,initialState:{}},h={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",IN:"in",SHOW:"show"},c=300,l=150,p="backdrop-click",u="esc",m=function(){function t(t,e,i){this._element=e,this._renderer=i,this.isShown=!1,this.isModalHiding=!1,this.clickStartedInContent=!1,this.config=Object.assign({},t)}return t.prototype.ngOnInit=function(){var t=this;this.isAnimated&&this._renderer.addClass(this._element.nativeElement,h.FADE),this._renderer.setStyle(this._element.nativeElement,"display","block"),setTimeout(function(){t.isShown=!0,t._renderer.addClass(t._element.nativeElement,i.isBs3()?h.IN:h.SHOW)},this.isAnimated?l:0),document&&document.body&&(1===this.bsModalService.getModalsCount()&&(this.bsModalService.checkScrollbar(),this.bsModalService.setScrollbar()),this._renderer.addClass(document.body,h.OPEN)),this._element.nativeElement&&this._element.nativeElement.focus()},t.prototype.onClickStarted=function(t){this.clickStartedInContent=t.target!==this._element.nativeElement},t.prototype.onClickStop=function(t){var e=t.target===this._element.nativeElement&&!this.clickStartedInContent;!this.config.ignoreBackdropClick&&"static"!==this.config.backdrop&&e?(this.bsModalService.setDismissReason(p),this.hide()):this.clickStartedInContent=!1},t.prototype.onEsc=function(t){this.isShown&&(27!==t.keyCode&&"Escape"!==t.key||t.preventDefault(),this.config.keyboard&&this.level===this.bsModalService.getModalsCount()&&(this.bsModalService.setDismissReason(u),this.hide()))},t.prototype.ngOnDestroy=function(){this.isShown&&this.hide()},t.prototype.hide=function(){var t=this;!this.isModalHiding&&this.isShown&&(this.isModalHiding=!0,this._renderer.removeClass(this._element.nativeElement,i.isBs3()?h.IN:h.SHOW),setTimeout(function(){t.isShown=!1,document&&document.body&&1===t.bsModalService.getModalsCount()&&t._renderer.removeClass(document.body,h.OPEN),t.bsModalService.hide(t.level),t.isModalHiding=!1},this.isAnimated?c:0))},t.decorators=[{type:e.Component,args:[{selector:"modal-container",template:"\n    <div [class]=\"'modal-dialog' + (config.class ? ' ' + config.class : '')\" role=\"document\">\n      <div class=\"modal-content\">\n        <ng-content></ng-content>\n      </div>\n    </div>\n  ",host:{class:"modal",role:"dialog",tabindex:"-1","[attr.aria-modal]":"true"}}]}],t.ctorParameters=function(){return[{type:a},{type:e.ElementRef},{type:e.Renderer2}]},t.propDecorators={onClickStarted:[{type:e.HostListener,args:["mousedown",["$event"]]}],onClickStop:[{type:e.HostListener,args:["mouseup",["$event"]]}],onEsc:[{type:e.HostListener,args:["window:keydown.esc",["$event"]]}]},t}(),f=function(){function t(t,e){this._isShown=!1,this.element=t,this.renderer=e}return Object.defineProperty(t.prototype,"isAnimated",{get:function(){return this._isAnimated},set:function(t){this._isAnimated=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isShown",{get:function(){return this._isShown},set:function(t){this._isShown=t,t?this.renderer.addClass(this.element.nativeElement,""+h.IN):this.renderer.removeClass(this.element.nativeElement,""+h.IN),i.isBs3()||(t?this.renderer.addClass(this.element.nativeElement,""+h.SHOW):this.renderer.removeClass(this.element.nativeElement,""+h.SHOW))},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.isAnimated&&(this.renderer.addClass(this.element.nativeElement,""+h.FADE),i.Utils.reflow(this.element.nativeElement)),this.isShown=!0},t.decorators=[{type:e.Component,args:[{selector:"bs-modal-backdrop",template:" ",host:{class:h.BACKDROP}}]}],t.ctorParameters=function(){return[{type:e.ElementRef},{type:e.Renderer2}]},t}(),y=function(){function t(t,i,n,o){this._element=t,this._renderer=n,this.onShow=new e.EventEmitter,this.onShown=new e.EventEmitter,this.onHide=new e.EventEmitter,this.onHidden=new e.EventEmitter,this._isShown=!1,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.timerHideModal=0,this.timerRmBackDrop=0,this.isNested=!1,this.clickStartedInContent=!1,this._backdrop=o.createLoader(t,i,n)}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},set:function(t){this._config=this.getConfig(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isShown",{get:function(){return this._isShown},enumerable:!0,configurable:!0}),t.prototype.onClickStarted=function(t){this.clickStartedInContent=t.target!==this._element.nativeElement},t.prototype.onClickStop=function(t){var e=t.target===this._element.nativeElement&&!this.clickStartedInContent;!this.config.ignoreBackdropClick&&"static"!==this.config.backdrop&&e?(this.dismissReason=p,this.hide(t)):this.clickStartedInContent=!1},t.prototype.onEsc=function(t){this._isShown&&(27!==t.keyCode&&"Escape"!==t.key||t.preventDefault(),this.config.keyboard&&(this.dismissReason=u,this.hide()))},t.prototype.ngOnDestroy=function(){this.config=void 0,this._isShown&&(this._isShown=!1,this.hideModal(),this._backdrop.dispose())},t.prototype.ngOnInit=function(){var t=this;this._config=this._config||this.getConfig(),setTimeout(function(){t._config.show&&t.show()},0)},t.prototype.toggle=function(){return this._isShown?this.hide():this.show()},t.prototype.show=function(){var t=this;this.dismissReason=null,this.onShow.emit(this),this._isShown||(clearTimeout(this.timerHideModal),clearTimeout(this.timerRmBackDrop),this._isShown=!0,this.checkScrollbar(),this.setScrollbar(),i.document&&i.document.body&&(i.document.body.classList.contains(h.OPEN)?this.isNested=!0:this._renderer.addClass(i.document.body,h.OPEN)),this.showBackdrop(function(){t.showElement()}))},t.prototype.hide=function(t){var e=this;t&&t.preventDefault(),this.onHide.emit(this),this._isShown&&(i.window.clearTimeout(this.timerHideModal),i.window.clearTimeout(this.timerRmBackDrop),this._isShown=!1,this._renderer.removeClass(this._element.nativeElement,h.IN),i.isBs3()||this._renderer.removeClass(this._element.nativeElement,h.SHOW),this._config.animated?this.timerHideModal=i.window.setTimeout(function(){return e.hideModal()},300):this.hideModal())},t.prototype.getConfig=function(t){return Object.assign({},d,t)},t.prototype.showElement=function(){var t=this;this._element.nativeElement.parentNode&&this._element.nativeElement.parentNode.nodeType===Node.ELEMENT_NODE||i.document&&i.document.body&&i.document.body.appendChild(this._element.nativeElement),this._renderer.setAttribute(this._element.nativeElement,"aria-hidden","false"),this._renderer.setAttribute(this._element.nativeElement,"aria-modal","true"),this._renderer.setStyle(this._element.nativeElement,"display","block"),this._renderer.setProperty(this._element.nativeElement,"scrollTop",0),this._config.animated&&i.Utils.reflow(this._element.nativeElement),this._renderer.addClass(this._element.nativeElement,h.IN),i.isBs3()||this._renderer.addClass(this._element.nativeElement,h.SHOW);var e=function(){t._config.focus&&t._element.nativeElement.focus(),t.onShown.emit(t)};this._config.animated?setTimeout(e,300):e()},t.prototype.hideModal=function(){var t=this;this._renderer.setAttribute(this._element.nativeElement,"aria-hidden","true"),this._renderer.setStyle(this._element.nativeElement,"display","none"),this.showBackdrop(function(){t.isNested||(i.document&&i.document.body&&t._renderer.removeClass(i.document.body,h.OPEN),t.resetScrollbar()),t.resetAdjustments(),t.focusOtherModal(),t.onHidden.emit(t)})},t.prototype.showBackdrop=function(t){var e=this;if(!this._isShown||!this.config.backdrop||this.backdrop&&this.backdrop.instance.isShown)if(!this._isShown&&this.backdrop){this.backdrop.instance.isShown=!1;var n=function(){e.removeBackdrop(),t&&t()};this.backdrop.instance.isAnimated?this.timerRmBackDrop=i.window.setTimeout(n,150):n()}else t&&t();else{if(this.removeBackdrop(),this._backdrop.attach(f).to("body").show({isAnimated:this._config.animated}),this.backdrop=this._backdrop._componentRef,!t)return;if(!this._config.animated)return void t();setTimeout(t,150)}},t.prototype.removeBackdrop=function(){this._backdrop.hide()},t.prototype.focusOtherModal=function(){if(null!=this._element.nativeElement.parentElement){var t=this._element.nativeElement.parentElement.querySelectorAll(".in[bsModal]");t.length&&t[t.length-1].focus()}},t.prototype.resetAdjustments=function(){this._renderer.setStyle(this._element.nativeElement,"paddingLeft",""),this._renderer.setStyle(this._element.nativeElement,"paddingRight","")},t.prototype.checkScrollbar=function(){this.isBodyOverflowing=i.document.body.clientWidth<i.window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()},t.prototype.setScrollbar=function(){i.document&&(this.originalBodyPadding=parseInt(i.window.getComputedStyle(i.document.body).getPropertyValue("padding-right")||0,10),this.isBodyOverflowing&&(i.document.body.style.paddingRight=this.originalBodyPadding+this.scrollbarWidth+"px"))},t.prototype.resetScrollbar=function(){i.document.body.style.paddingRight=this.originalBodyPadding+"px"},t.prototype.getScrollbarWidth=function(){var t=this._renderer.createElement("div");this._renderer.addClass(t,h.SCROLLBAR_MEASURER),this._renderer.appendChild(i.document.body,t);var e=t.offsetWidth-t.clientWidth;return this._renderer.removeChild(i.document.body,t),e},t.decorators=[{type:e.Directive,args:[{selector:"[bsModal]",exportAs:"bs-modal"}]}],t.ctorParameters=function(){return[{type:e.ElementRef},{type:e.ViewContainerRef},{type:e.Renderer2},{type:n.ComponentLoaderFactory}]},t.propDecorators={config:[{type:e.Input}],onShow:[{type:e.Output}],onShown:[{type:e.Output}],onHide:[{type:e.Output}],onHidden:[{type:e.Output}],onClickStarted:[{type:e.HostListener,args:["mousedown",["$event"]]}],onClickStop:[{type:e.HostListener,args:["mouseup",["$event"]]}],onEsc:[{type:e.HostListener,args:["keydown.esc",["$event"]]}]},t}(),g=function(){function t(t,i){this.clf=i,this.config=d,this.onShow=new e.EventEmitter,this.onShown=new e.EventEmitter,this.onHide=new e.EventEmitter,this.onHidden=new e.EventEmitter,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.modalsCount=0,this.lastDismissReason="",this.loaders=[],this._backdropLoader=this.clf.createLoader(null,null,null),this._renderer=t.createRenderer(null,null)}return t.prototype.show=function(t,e){return this.modalsCount++,this._createLoaders(),this.config=Object.assign({},d,e),this._showBackdrop(),this.lastDismissReason=null,this._showModal(t)},t.prototype.hide=function(t){var e=this;1===this.modalsCount&&(this._hideBackdrop(),this.resetScrollbar()),this.modalsCount=this.modalsCount>=1?this.modalsCount-1:0,setTimeout(function(){e._hideModal(t),e.removeLoaders(t)},this.config.animated?l:0)},t.prototype._showBackdrop=function(){var t=this.config.backdrop||"static"===this.config.backdrop,e=!this.backdropRef||!this.backdropRef.instance.isShown;1===this.modalsCount&&(this.removeBackdrop(),t&&e&&(this._backdropLoader.attach(f).to("body").show({isAnimated:this.config.animated}),this.backdropRef=this._backdropLoader._componentRef))},t.prototype._hideBackdrop=function(){var t=this;if(this.backdropRef){this.backdropRef.instance.isShown=!1;var e=this.config.animated?l:0;setTimeout(function(){return t.removeBackdrop()},e)}},t.prototype._showModal=function(t){var e=this,i=this.loaders[this.loaders.length-1],n=new s,o=i.provide({provide:a,useValue:this.config}).provide({provide:s,useValue:n}).attach(m).to("body").show({content:t,isAnimated:this.config.animated,initialState:this.config.initialState,bsModalService:this});return o.instance.level=this.getModalsCount(),n.hide=function(){var t=e.config.animated?c:0;setTimeout(function(){return o.instance.hide()},t)},n.content=i.getInnerComponent()||null,n.setClass=function(t){o.instance.config.class=t},n},t.prototype._hideModal=function(t){var e=this.loaders[t-1];e&&e.hide()},t.prototype.getModalsCount=function(){return this.modalsCount},t.prototype.setDismissReason=function(t){this.lastDismissReason=t},t.prototype.removeBackdrop=function(){this._backdropLoader.hide(),this.backdropRef=null},t.prototype.checkScrollbar=function(){this.isBodyOverflowing=document.body.clientWidth<window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()},t.prototype.setScrollbar=function(){document&&(this.originalBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")||"0",10),this.isBodyOverflowing&&(document.body.style.paddingRight=this.originalBodyPadding+this.scrollbarWidth+"px"))},t.prototype.resetScrollbar=function(){document.body.style.paddingRight=this.originalBodyPadding+"px"},t.prototype.getScrollbarWidth=function(){var t=this._renderer.createElement("div");this._renderer.addClass(t,h.SCROLLBAR_MEASURER),this._renderer.appendChild(document.body,t);var e=t.offsetWidth-t.clientWidth;return this._renderer.removeChild(document.body,t),e},t.prototype._createLoaders=function(){var t=this.clf.createLoader(null,null,null);this.copyEvent(t.onBeforeShow,this.onShow),this.copyEvent(t.onShown,this.onShown),this.copyEvent(t.onBeforeHide,this.onHide),this.copyEvent(t.onHidden,this.onHidden),this.loaders.push(t)},t.prototype.removeLoaders=function(t){this.loaders.splice(t-1,1),this.loaders.forEach(function(t,e){t.instance.level=e+1})},t.prototype.copyEvent=function(t,e){var i=this;t.subscribe(function(){e.emit(i.lastDismissReason)})},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.RendererFactory2},{type:n.ComponentLoaderFactory}]},t}(),v=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[g,n.ComponentLoaderFactory,o.PositioningService]}},t.forChild=function(){return{ngModule:t,providers:[g,n.ComponentLoaderFactory,o.PositioningService]}},t.decorators=[{type:e.NgModule,args:[{declarations:[f,y,m],exports:[f,y],entryComponents:[f,m]}]}],t}();t.BsModalRef=s,t.BsModalService=g,t.ModalBackdropComponent=f,t.ModalBackdropOptions=r,t.ModalContainerComponent=m,t.ModalDirective=y,t.ModalModule=v,t.ModalOptions=a,t.ɵa=h,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-bootstrap-modal.umd.min.js.map